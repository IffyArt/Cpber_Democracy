// lines
jQuery.extend(jQuery.easing,{easeOutBack:function(a,b,l,t,h,g){void 0==g&&(g=1.70158);return t*((b=b/h-1)*b*((g+1)*b+g)+1)+l},easeOutBackCubic:function(a,b,l,t,h,g){a=(b/=h)*b;return l+t*(-1.5*a*b*a+2*a*a+4*a*b+-9*a+5.5*b)},easeOutCubic:function(a,b,l,t,h){return t*((b=b/h-1)*b*b+1)+l},easeOutExpo:function(a,b,l,t,h){return b==h?l+t:t*(-Math.pow(2,-10*b/h)+1)+l}});
function ws_lines(a,b,l){function t(q){q.save();q.setTransform(1,0,0,1,0,0);q.clearRect(0,0,u,v);q.restore()}function h(q,b,a,l,h,c,r){var e=u,k=v;if(45==r||-45==r)e=k=Math.sqrt(u*u+v*v);if(90==r||-90==r)e=v,k=u;r=(e-u)/2;var w=(k-v)/2;t(q);for(var m=0,d=a.length;m<d;m++){var f=Math.max(0,Math.min(1,b-a[m]*(1-b)));q.beginPath();q.fillStyle=x[m][0];l&&(q.fillStyle=x[m][0].replace(/rgb/g,"rgba").replace(/\)/g,","+Math.min(b+.1,1)+")"));var g=0,p=0,y=0,z=0;switch(h){case "from-top":c&&n.easing[c]&&(f=
n.easing[c](1,f,0,1,1,1));y=Math.ceil(.5+e/d);z=k;g=(d-m-1)*e/d-r;p=-1.5*k*(1-f)-w;break;case "from-bottom":c&&n.easing[c]&&(f=n.easing[c](1,f,0,1,1,1));y=Math.ceil(.5+e/d);z=k;g=(d-m-1)*e/d-r;p=1.5*k*(1-f)-w;break;case "width-from-center":c&&n.easing[c]&&(f=n.easing[c](1,f,0,1,1,1));y=Math.ceil(.5+e/d)*f;z=k;g=(d-m-1)*e/d+(1-f)*e/d/2-r;p=-w;break;case "height-from-center":c&&n.easing[c]&&(f=n.easing[c](1,f,0,1,1,1));y=Math.ceil(.5+e/d);z=k*f;g=(d-m-1)*e/d-r;p=(1-f)*k/2-w;break;case "fill-half-fill-full":.5>
f&&c&&n.easing[c]&&(f=n.easing[c](.5,f,0,.5,.5,.5)),y=Math.ceil(.5+e/d),z=k*f,g=(d-m-1)*e/d-r,p=(1-f)*k/2-w}q.fillRect(g,p,y,z)}}function g(b,a){a=a||{};var l=a.exclude||[],g,h=document.createElement("canvas"),c=h.getContext("2d");h.width=b.naturalWidth;h.height=b.naturalHeight;c.drawImage(b,0,0,b.naturalWidth,b.naturalHeight);try{g=c.getImageData(a.x?a.x:0,a.y?a.y:0,a.w?a.w:b.width,a.h?a.h:b.height).data}catch(n){return!1}for(var h=(a.w?a.w:b.width*a.h?a.h:b.height)||g.length,c={},e="",k=[],p="",
m=0,d=0;d<h;){k[0]=g[d];k[1]=g[d+1];k[2]=g[d+2];e=k.join(",");c[e]=e in c?c[e]+1:1;if(-1===l.indexOf(["rgb(",e,")"].join(""))){var f=c[e];f>m&&(p=e,m=f)}d+=4}return["rgb(",p,")"].join("")}var n=jQuery,E=n(this),F=a.noCanvas||!document.createElement("canvas").getContext,u=a.width,v=a.height,D=n("<div>").css({position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden"}).addClass("ws_effect ws_lines").appendTo(l);if(!F)var G=n("<canvas>").css({position:"absolute",left:0,top:0,width:"100%",
height:"100%"}).appendTo(D),p=G.get(0).getContext("2d");var x=[["rgb(187,187,187)",.1,.3],["rgb(179,179,179)",.9,.8],["rgb(182,182,182)",.68,.4],["rgb(185,185,185)",.25,.4],["rgb(204,204,204)",.11,.7],["rgb(195,195,195)",.18,.1],["rgb(198,198,198)",.4,.2],["rgb(201,201,201)",.55,-.04],["rgb(211,211,211)",0,.95],["rgb(214,214,214)",.5,.8],["rgb(217,217,217)",.9,.1]],A=[[.5,.4,.3,.2,.1,0,.1,.2,.3,.4,.5],[0,.1,.2,.3,.4,.5,.4,.3,.2,.1,0],[0,.05,.1,.15,.2,.25,.3,.35,.4,.45,.5],[.5,.45,.4,.35,.3,.25,.2,
.15,.1,.05,0],[.7,.3,0,.1,.5,.3,.4,.1,.6,.2,0]],B=["from-top","from-bottom","width-from-center","height-from-center","fill-half-fill-full"],C=["easeOutExpo","easeOutCubic","easeOutBackCubic","easeOutBack"],H=[45,-45,0,180,90,-90];this.go=function(q,n){if(F)l.find(".ws_list").css("transform","translate3d(0,0,0)").stop(!0).animate({left:q?-q+"00%":/Safari/.test(navigator.userAgent)?"0%":0},a.duration,"easeInOutExpo",function(){E.trigger("effectEnd")});else{u=l.width();v=l.height();var D=A[Math.floor(Math.random()*
A.length)],I=A[Math.floor(Math.random()*A.length)];G.attr({width:u,height:v});for(var J=b.get(n),c=0,r=x.length;c<r;c++){var e=Math.abs(x[c][1]),k=Math.abs(x[c][2]);x[c][0]=g(J,{x:e*u,y:k*v,w:2,h:2})||x[c][0]}var w=B[Math.floor(Math.random()*B.length)],m=C[Math.floor(Math.random()*C.length)],d=H[Math.floor(Math.random()*H.length)];p.translate(u/2,v/2);p.rotate(d*Math.PI/180);p.translate(-u/2,-v/2);wowAnimate(function(a){h(p,a,D,!0,w,m,d)},0,1,a.duration/2,function(){l.find(".ws_list").css({left:q?
-q+"00%":/Safari/.test(navigator.userAgent)?"0%":0});w=B[Math.floor(Math.random()*B.length)];m=C[Math.floor(Math.random()*C.length)];wowAnimate(function(a){h(p,1-a,I,!1,w,m,d)},0,1,a.duration/2,.15*a.duration,function(){t(p);E.trigger("effectEnd")})})}}};
